
%% script for checking if all the post training files and/or data is available

% the script is triggered only when the do_train argument is chosen to be 'no'

%%
function chk = check_training()
    training_path = fullfile(w2mhstoolbox_path, 'training');
    if exist(fullfile(training_path, 'Training_model.meta'), 'file')  && ...
       exist(fullfile(training_path, 'Training_model.index'), 'file') && ...
       exist(fullfile(training_path, 'Training_model.data-00000-of-00001'), 'file')
        disp("All training output present. Training is not required.");
        chk = true;
    else
        disp("Some training output is missing. Training is required.");
        chk = false;
        if ~exist(fullfile(training_path, 'features_training.mat'), 'file')
            error('Cannot find features_training.mat. Cannot train the model.')
        if ~exist(fullfile(training_path, 'labels_training.mat'), 'file')
            error('Cannot find features_training.mat. Cannot train the model.')
        end
    end
    chk = int64(py.check_training.main());
     if ~exist('training/DNN_training_file.csv','file')
          chk = 0;
          training = struct();
      else
          validation_labels = csvread('training/DNN_training_file.csv');
          training = struct('method','DNN','validation',validation_labels);
     end
end